% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vote_functions.R
\name{gen_vote}
\alias{gen_vote}
\title{Count voting tokens inside generated responses}
\usage{
gen_vote(
  voting_list,
  underlying_list = NULL,
  trigger,
  type = c("number", "letter"),
  label = "Option",
  title = "Vote Count",
  return_winner = c("ranking", "content", "scoreboard", "id")
)
}
\arguments{
\item{voting_list}{List of response objects (such as the elements produced by
\code{\link[=gen_batch]{gen_batch()}}) or a character vector.}

\item{underlying_list}{Optional list containing the items being voted on.
When supplied, \code{return_winner = "content"} returns the corresponding entry
from this list (instead of the \code{voting_list}).}

\item{trigger}{Character string used to locate the vote inside each text (for
example, \code{"option"}).}

\item{type}{Either \code{"number"} (default) to capture multi-digit options, or
\code{"letter"} to capture a single alphabetical option.}

\item{label}{Character label included in the printed ranking (default
\code{"Option"}).}

\item{title}{Optional character title printed before the ranking (default
\code{"Vote Count"}). Use \code{NULL} or \code{""} to skip the title.}

\item{return_winner}{Logical. When \code{TRUE}, the function invisibly returns only
the winning option instead of the full ranking.}
}
\value{
Invisibly returns the ranking (character vector) or, when
\code{return_winner = TRUE}, the winning option. A message is printed when no
votes are found.
}
\description{
Scans a list of texts (typically the output lists returned by
\code{\link[=gen_batch]{gen_batch()}}) and counts the first occurrence of a vote marker that follows a
given trigger word or phrase. The vote itself can be extracted either as a
number (multi-digit) or as a single letter. When present, the provider model
associated with each response is surfaced in the ranking output.
}
\examples{
votes <- list(
  list(response_value = "I choose option 2", model = "model-a"),
  list(response_value = "Option 2 is my pick", model = "model-b"),
  list(response_value = "My vote is option 3", model = "model-c")
)

# Count numeric votes that follow the word "option"
gen_vote(votes, trigger = "option", type = "number")

# Retrieve only the winning option
gen_vote(votes, trigger = "option", return_winner = TRUE)
}
